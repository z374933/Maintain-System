<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <title>公告</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
    <script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
    <script src="../lib/jquery-3.4.1/jquery-3.4.1.min.js" charset="utf-8"></script>
    <style>
        .box {
            width: 100%;
            height: 100%;
        }

        .img {
            background-position: center;
            background-repeat: no-repeat;
        }

        .center {
            margin: auto;
            width: 60vw;
        }

        .center li {
            height: 10rem;
            width: 100%;
            display: flex;
            justify-content: space-between;
            margin: 2rem 0 1rem 0;
        }

        .center li>div:nth-child(1) {
            width: 10rem;
            height: 10rem;
            border: 1px solid #999;
            border-radius: 10px;
            /* border: 1px solid red; */
        }

        .center li>div:nth-child(2) {
            height: 10rem;
            width: 83%;
            padding: 0 1rem 0 1rem;
            display: flex;
            flex-direction: column;
        }

        .center li>div:nth-child(2)>span {
            flex: 3;
            font-size: 1.5rem;
        }

        .center li>div:nth-child(2)>div {
            font-size: 1rem;
            color: #666;
            flex: 8;
        }

        .center>li>div:nth-child(2)>span:nth-child(3) {
            color: #999;
            font-size: 0.8rem;
        }
    </style>
</head>

<body>
    <div class="box">
        <div class="layui-carousel" id="test1" lay-filter="test1">
            <div carousel-item="">
                <div class="img"
                    style="background: url(../images/main1.jpg) center no-repeat"></div>
                <div class="img"
                    style="background: url(../images/main2.jpg) center no-repeat"></div>
                <div class="img"
                    style="background: url(../images/main3.jpg) center no-repeat"></div>
            </div>
        </div>
        <div>
            <ul class="center">
            </ul>
        </div>
    </div>
    <script>
        $.ajax({
            "url": "/billboard/list",
            "type": "POST",
            "success": function (data) {
                //获取元素
                var element = document.getElementsByClassName("center")[0];
                for(let i=0;i<data.data.length;i++){
                    const newLi = document.createElement("li");
                    const str = `
                    <div style="background: url(../images/${data.data[i].img}) center no-repeat;background-size: cover;"></div>
                    <div>
                        <span>${data.data[i].title}</span>
                        <div>${data.data[i].content}</div>
                        <span><i class="layui-icon layui-icon-time" style="margin-right: 0.5rem;">
                            </i>${data.data[i].createDate}</span>
                    </div>
                    `;
                    newLi.innerHTML = str
                    element.appendChild(newLi);
                }
            }
        })


        layui.use(['carousel', 'form'], function () {
            var carousel = layui.carousel
                , form = layui.form;

            //常规轮播
            carousel.render({
                elem: '#test1',
                arrow: 'hover',
                width: '100%',
                height: '440px'
            });

            //事件
            carousel.on('change(test4)', function (res) {
                console.log(res)
            });

            var $ = layui.$, active = {
                set: function (othis) {
                    var THIS = 'layui-bg-normal'
                        , key = othis.data('key')
                        , options = {};

                    othis.css('background-color', '#5FB878').siblings().removeAttr('style');
                    options[key] = othis.data('value');
                    ins3.reload(options);
                }
            };

            //监听开关
            form.on('switch(autoplay)', function () {
                ins3.reload({
                    autoplay: this.checked
                });
            });

            $('.demoSet').on('keyup', function () {
                var value = this.value
                    , options = {};
                if (!/^\d+$/.test(value)) return;
                options[this.name] = value;
                ins3.reload(options);
            });

            //其它示例
            $('.demoTest .layui-btn').on('click', function () {
                var othis = $(this), type = othis.data('type');
                active[type] ? active[type].call(this, othis) : '';
            });
        });
    </script>
</body>

</html>